<html>
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>在 Xcode 15 中使用 Logger | lijianfei.com</title>
<link rel="shortcut icon" href="https://lijianfei.com/favicon.ico?v=1761120781074">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.3.0/fonts/remixicon.css" rel="stylesheet">
<link rel="stylesheet" href="https://lijianfei.com/styles/main.css">
<link rel="alternate" type="application/atom+xml" title="在 Xcode 15 中使用 Logger | lijianfei.com - Atom Feed" href="https://lijianfei.com/atom.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700">
<script id="chatway" async="true" src="https://cdn.chatway.app/widget.js?id=laNLrbQJYsup"></script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5152652314157130"
     crossorigin="anonymous">
</script>

<script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "m0j4678d23");
</script>
     


<script async src="https://www.googletagmanager.com/gtag/js?id=UA-74398720-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-74398720-1');
</script>


    <meta property="og:title" content="在 Xcode 15 中使用 Logger">
    <meta property="og:description" content="在 Xcode 15 的大舞台上，苹果的大佬们终于拿出了神器——控制台过滤功能！

😂 在日常开发的奔波中，我们的好朋友 Xcode 控制台就像是个无底洞，勇敢地吞噬着我们源源不断的日志。这些日志就像是冬天的雪花，温柔却又狠狠地堆积起来，...">
    <meta property="og:type" content="Xcode">
    <meta property="og:url" content="https://lijianfei.com/post/zai-xcode-15-zhong-shi-yong-logger/">
    <meta property="og:image" content="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/2024-04-12-18-03-20.png"/>
    <meta property="og:image:width" content="800">
    <meta property="og:image:height" content="500">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@lijianfei_com">
    <meta name="twitter:title" content="在 Xcode 15 中使用 Logger">
    <meta name="twitter:image" content="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/2024-04-12-18-03-20.png">
    <meta name="twitter:image:width" content="800">

    <meta name="description" content="在 Xcode 15 的大舞台上，苹果的大佬们终于拿出了神器——控制台过滤功能！

😂 在日常开发的奔波中，我们的好朋友 Xcode 控制台就像是个无底洞，勇敢地吞噬着我们源源不断的日志。这些日志就像是冬天的雪花，温柔却又狠狠地堆积起来，..." />
    <meta name="keywords" content="Xcode" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
    <script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
  </head>
  <body>
    <div class="main">
      <div class="main-content">
        <div class="site-header">
  <a href="https://lijianfei.com">
  <img class="avatar" src="https://lijianfei.com/images/avatar.png?v=1761120781074" alt="">
  </a>
  <h1 class="site-title">
    lijianfei.com
  </h1>
  <p class="site-description">
    思危，思退，思变。<br>
追求进步，不求完美。<br>
做好小事，熬过难事，静成大事。<br>
语以泄败，事以密成，沉得住气，静得下心。
  </p>
  <div class="menu-container">
    
      
        <a href="/" class="menu">
          首页
        </a>
      
    
      
        <a href="/archives" class="menu">
          归档
        </a>
      
    
      
        <a href="/tags" class="menu">
          标签
        </a>
      
    
      
        <a href="/post/about" class="menu">
          关于我
        </a>
      
    
      
        <a href="https://github.com/lijianfeigeek" class="menu" target="_blank">
          Github
        </a>
      
    
  </div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
    <img src="https://ghchart.rshah.org/F15406/lijianfeigeek" style="max-width: 100%;height: auto;"/>
  </div>
</div>

        <div class="post-detail">
          <article class="post">
            <h2 class="post-title">
              在 Xcode 15 中使用 Logger
            </h2>
            <div class="post-info">
              <span>
                2024-01-22
              </span>
              <span>
                12 min read
              </span>
              
                <a href="https://lijianfei.com/tag/xcode/" class="post-tag">
                  # Xcode
                </a>
              
            </div>
            
              <img class="post-feature-image" src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/2024-04-12-18-03-20.png" alt="">
            
            <div class="post-content-wrapper">
              <div class="post-content">
                <p>在 Xcode 15 的大舞台上，苹果的大佬们终于拿出了神器——控制台过滤功能！</p>
<!-- more -->
<p>😂 在日常开发的奔波中，我们的好朋友 Xcode 控制台就像是个无底洞，勇敢地吞噬着我们源源不断的日志。这些日志就像是冬天的雪花，温柔却又狠狠地堆积起来，最后竟然把我们的控制台埋了个严严实实。</p>
<p>😌 但是，好消息来了！在 Xcode 15 的大舞台上，苹果的大佬们终于拿出了神器——控制台过滤功能！它就像是一把神奇的魔法扫帚，帮我们优雅地清理掉那些我们不想看的“垃圾”日志。现在，让我们一起来探索这个令人振奋的新功能吧！🌟</p>
<h2 id="1-logger-类型">1. Logger 类型</h2>
<p>😜 在 iOS 14 的奇妙世界里，苹果公司神秘地拿出了一个酷炫的工具：Logger 类型！这个小家伙，就像是一位多才多艺的艺术家，能够以各种姿势演绎日志的精彩。</p>
<p>🎩 想象一下，你就像是个指挥家，挥舞着你的指挥棒（也就是几行代码啦）：</p>
<pre><code>let logger = Logger(subsystem: &quot;my_system&quot;, category: &quot;my_category&quot;)
logger.log(&quot;这是一个 Log 信息&quot;)
logger.info(&quot;这是一个 info 信息&quot;)
logger.warning(&quot;这是一个 warning 信息&quot;)
logger.debug(&quot;这是一个 Debug 信息&quot;)
logger.error(&quot;这是一个 Error 信息&quot;)
logger.fault(&quot;这是一个 fault 信息&quot;)
</code></pre>
<p>🌈 然后，就像魔法一样，这些信息在控制台上跳跃、旋转，呈现出一幅幅美妙的图景。每一条日志都有自己的个性，有的像是在轻声细语，有的则像是在大声警告。真是一场视觉和听觉的盛宴啊！🎉🎊</p>
<figure data-type="image" tabindex="1"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/CL1Fki.png" alt="CL1Fki" loading="lazy"></figure>
<h2 id="2-高级用法">2. 高级用法</h2>
<h3 id="21-查看-log-详细信息">2.1 查看 log 详细信息</h3>
<p>🔍 在 Xcode 的奇幻世界中，有一个隐藏的秘密技巧，专门用来揭开日志的神秘面纱。就像是在侦探小说里寻找线索一样，这个技巧可以帮助我们深入了解每一条日志的秘密。</p>
<p>👀 当你在控制台中看到一行行日志时，如果你的好奇心被某一行特别吸引，<strong>你可以轻轻地将鼠标悬停在它上面，然后像是轻拂键盘上的钢琴键一样，轻轻按下空格键。</strong></p>
<p>💥 瞬间，一个新的信息窗口就像魔术一样出现了！在这个窗口里，你可以看到所有关于这条日志的详细信息，就好像是把这条日志的DNA完全解码了一样。这里面有各种信息，每一条都可能是解决问题的关键线索。真是一种令人兴奋的探索之旅呀！🕵️‍♂️🔎</p>
<figure data-type="image" tabindex="2"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/NhcMLP.png" alt="NhcMLP" loading="lazy"></figure>
<p>🌟 当你使用这个神奇的技巧在 Xcode 的控制台中揭开一条日志的面纱时，就像是打开了一本详尽的日志传记。在这个信息窗口中，你可以看到这条日志的各种身份信息，就像是它的个人档案一样。</p>
<p>🕒 首先，你会看到这条日志的“类型”，它就像是日志的身份证，告诉你这是一条普通的记录、一条警告还是一个错误。</p>
<p>⏰ 然后是“时间”，这告诉你这条日志是在什么时候诞生的，就像是它的出生证明。</p>
<p>🔧 接着是“Subsystem”和“Category”，它们像是日志的家庭背景，告诉你这条日志来自于哪个系统的哪个领域。</p>
<p>📞 最后，还有“调用方法”，这就像是日志的生活轨迹，告诉你这条日志是在执行什么操作时被触发的。</p>
<p>这就是一条日志的全部秘密，被你一探究竟。真是一个充满了发现和惊喜的过程呢！🔍🎉</p>
<h3 id="22-打开筛选器直接在-log-中显示详细信息">2.2 打开筛选器，直接在 log 中显示详细信息</h3>
<p>🎛️ 对于那些觉得每次点击然后按空格键查看日志详情有些麻烦的开发侠们，Xcode 提供了一个更加便捷的方法！这就好比是给你的控制台装上了一个高级的“自动显示”装置。</p>
<p>🔧 在控制台的界面上，你会发现一个被称为 “MetaData Options” 的按钮。这个按钮就像是一个神秘的宝箱，打开它，你可以选择你想要自动显示在每条日志上的信息。</p>
<p>👀 一旦你勾选了你感兴趣的信息，比如类型、时间、Subsystem、Category或调用方法，这些信息就会像魔法一样自动出现在每条日志旁边。这样，你就可以一眼看到所有重要的信息，而不需要每次都去“挖掘”它们。</p>
<p>🌈 这就像是给你的日志阅读体验加上了一层彩虹滤镜，让每一条日志都变得五彩斑斓、一目了然。从此，查看日志再也不是一件枯燥无味的事情了！🤓🌟</p>
<figure data-type="image" tabindex="3"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/X6zGdK.png" alt="X6zGdK" loading="lazy"></figure>
<figure data-type="image" tabindex="4"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/gFvAyb.png" alt="gFvAyb" loading="lazy"></figure>
<figure data-type="image" tabindex="5"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/Rg5HcG.png" alt="Rg5HcG" loading="lazy"></figure>
<h3 id="23-快速跳转源代码">2.3 快速跳转源代码</h3>
<p>🚀 对于那些想要快速找到某条日志背后的代码秘密的 Xcode 探险家们，这里有一个超级实用的快捷方式。这就像是拥有了一个直达日志源头的传送门！</p>
<p>🖱️ 当你把鼠标悄悄地放在某条神秘的日志上时，就好像是在它上面施了魔法。突然，在这条日志的右下角，会出现一个小小的提示，就像是一张藏宝图的标记，揭示了这条日志是在哪个文件的哪一行被打印出来的。</p>
<p>🏹 这时，你会看到一个像是小箭头的标志。只需轻轻一点，这个箭头就会像是一架高速的火箭，把你直接传送到那段神秘代码所在的地方。这就像是开启了一扇通往代码世界的大门，让你可以迅速找到并解决问题的根源。</p>
<p>🌟 这个功能就像是给开发者们的一个小小的礼物，让日志调试变得更加高效和直观。从此，再也不用在无尽的代码海洋中迷失方向了！🛸💫</p>
<figure data-type="image" tabindex="6"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/zPOT6K.png" alt="zPOT6K" loading="lazy"></figure>
<h3 id="24-日志过滤">2.4 日志过滤</h3>
<figure data-type="image" tabindex="7"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/IsWPoZ.png" alt="IsWPoZ" loading="lazy"></figure>
<figure data-type="image" tabindex="8"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/QkS7AD.png" alt="QkS7AD" loading="lazy"></figure>
<p>🔍 在 Xcode 15 的控制台中，有一个非常强大且方便的功能，就是日志过滤器。这个过滤器就像是一个智能助手，帮你在海量日志中迅速找到那些你真正需要关注的信息。</p>
<p>🎯 想象一下，如果你只对特定类型的日志感兴趣，比如只想看到 &quot;my_category&quot; 类型的日志，你只需在控制台右下角的 filter 输入框中输入 &quot;my_category&quot;。就像是对这个智能助手下达了一个特别指令，它就会立刻帮你筛选出所有属于 &quot;my_category&quot; 的日志。</p>
<p>👓 过滤条件的选择是非常灵活的。你可以点击输入框左侧的按钮，就像是打开了一个秘密武器箱，里面有各种可以选择的过滤条件。你可以根据需要继续在输入框中输入，增加更多的过滤条件，精确地定位到你感兴趣的日志。</p>
<p>🌈 这个功能的强大之处在于它的灵活性和便捷性。它可以让日志调试变得更加高效，让你能够更快地找到问题所在，从而提高开发效率。</p>
<p>如果你已经升级到了 Xcode 15，那么强烈推荐你在项目开发中尝试使用这个功能。它肯定会成为你日常开发中的得力助手！🚀🌟</p>
<h2 id="3-协作开发">3. 协作开发</h2>
<h3 id="31-logger-只在debug环境使用">3.1 Logger 只在debug环境使用</h3>
<p>🔧 在使用 Logger 类型时，一个关键的考虑是控制其在不同编译环境下的行为。默认情况下，Logger 输出的内容不仅在 Debug 模式下可见，甚至在 Release 模式下也会展示。这在某些情况下可能不是我们想要的，因为在 Release 版本中输出大量日志可能会影响性能和用户隐私。</p>
<p>🚫 为了解决这个问题，我们可以使用条件编译。这个技巧就像是给我们的日志系统安装了一个智能开关，只有在 Debug 模式下才会打开，而在 Release 模式下则会保持关闭。</p>
<p>👨‍💻 下面是如何实现这一点的示例代码：</p>
<pre><code>#if DEBUG
let logger = Logger(subsystem: &quot;my_system&quot;, category: &quot;my_category&quot;)
logger.log(&quot;这是一个 Log 信息&quot;)
logger.info(&quot;这是一个 info 信息&quot;)
logger.warning(&quot;这是一个 warning 信息&quot;)
logger.debug(&quot;这是一个 Debug 信息&quot;)
logger.error(&quot;这是一个 Error 信息&quot;)
logger.fault(&quot;这是一个 fault 信息&quot;)
#endif
</code></pre>
<p>在这段代码中，<code>#if DEBUG</code> 指令确保了只有在 Debug 编译环境下，日志记录的代码才会被编译和执行。这样，在 Release 模式下，这些日志相关的代码就像是隐形的一样，不会被执行，也就不会产生任何输出。</p>
<p>💡 这种做法既保证了在开发过程中能够充分利用日志进行调试，又确保了在生产环境中不会因为过多的日志输出而影响应用的性能和安全性。是一种非常简洁高效的解决方案。🚀🌟</p>
<h3 id="32-多人协作">3.2 多人协作</h3>
<p>👨‍💻 在一个多人开发的项目中，控制台日志很容易变得混乱和难以管理。每个开发者都在打印自己的日志，很快就会淹没在海量的信息中。为了解决这个问题，利用 Logger 类型的特性为每个团队成员创建独立的日志对象是一个非常聪明的做法。这就像是给每个开发者分配了自己的小花园，他们可以在其中自由地种植和管理自己的日志植物。</p>
<p>🌟 通过扩展 Logger 类型，我们可以为团队中的每个成员创建一个定制的日志对象。例如：</p>
<pre><code>extension Logger {
    // 张三用这个
    static let zs: Self = Logger(subsystem: &quot;zs&quot;, category: &quot;zs&quot;)
    // 李四用这个
    static let ls: Self = Logger(subsystem: &quot;ls&quot;, category: &quot;ls&quot;)
    // 王五用这个
    static let ww: Self = Logger(subsystem: &quot;ww&quot;, category: &quot;ww&quot;)
}
</code></pre>
<p>这样，张三、李四和王五就可以使用各自的日志对象来打印日志：</p>
<pre><code>Logger.zs.debug(&quot;我是张三，这是我的 debug log&quot;)
Logger.ls.warning(&quot;我是李四，这是我的 warning log&quot;)
Logger.ww.error(&quot;我是王五，这是我的 error log&quot;)
</code></pre>
<p>🔍 如果你是张三，你只需要在 Xcode 的控制台过滤器中输入 &quot;zs&quot;，就可以只看到自己的日志了。这样，控制台就变成了属于你自己的私人空间，清晰、整洁，不再被其他人的日志干扰。</p>
<figure data-type="image" tabindex="9"><img src="https://raw.githubusercontent.com/lijianfeigeek/PictureBed/main/uPic/TQGmEg.png" alt="TQGmEg" loading="lazy"></figure>
<p>🚀 这个方法不仅提高了调试效率，还让团队协作变得更加有序和高效。每个人都可以专注于自己的任务，而不用在海量日志中迷失方向。简直就是团队开发中的小确幸！🌈🌟</p>
<h3 id="33-两者结合">3.3 两者结合</h3>
<p>🛠️ 结合使用 <code>Logger</code> 和 <code>DEBUG</code> 预处理器指令是一种非常高效的策略，特别是在团队合作的环境中。这种做法就像是给每个开发者配备了一个智能的日志工具箱，它只在 Debug 模式下打开，从而避免在 Release 版本中产生不必要的日志输出。</p>
<p>👨‍💻 通过在 <code>Logger</code> 扩展中定义私有的静态日志对象，并提供静态方法来进行日志记录，每个开发者都可以轻松地记录自己的日志，而这些日志只会在 Debug 模式下显示。例如：</p>
<pre><code>extension Logger {
    // 张三用这个
    private static let zs: Self = Logger(subsystem: &quot;zs&quot;, category: &quot;zs&quot;)
    // 李四用这个
    private static let ls: Self = Logger(subsystem: &quot;ls&quot;, category: &quot;ls&quot;)
    // 王五用这个
    private static let ww: Self = Logger(subsystem: &quot;ww&quot;, category: &quot;ww&quot;)
    
    static func zsLog(level: OSLogType, _ message: String) {
        #if DEBUG
        zs.log(level: level, &quot;\(message)&quot;)
        #endif
    }
    
    static func lsLog(level: OSLogType, _ message: String) {
        #if DEBUG
        ls.log(level: level, &quot;\(message)&quot;)
        #endif
    }
    
    static func wwLog(level: OSLogType, _ message: String) {
        #if DEBUG
        ww.log(level: level, &quot;\(message)&quot;)
        #endif
    }
}
</code></pre>
<p>🎯 这样，使用起来就非常简洁明了：</p>
<pre><code>Logger.zsLog(level: .debug, &quot;我是张三，这是我的 debug log&quot;)
Logger.lsLog(level: .info, &quot;我是李四，这是我的 info log&quot;)
Logger.wwLog(level: .error, &quot;我是王五，这是我的 error log&quot;)
</code></pre>
<p>🌟 这种方法的好处是多方面的。首先，它保持了日志代码的整洁和一致性。其次，它确保了只有在 Debug 模式下，日志才会被记录，从而提高了应用的性能和安全性。最后，它使得每个开发者都可以专注于自己的日志，而不会被其他人的日志干扰，提高了开发效率和团队协作的流畅度。</p>
<p>这种方法不仅方便，而且在大型项目和团队合作中非常实用。🚀🌈</p>

              </div>
              <div class="toc-container">
                <ul class="markdownIt-TOC">
<li>
<ul>
<li><a href="#1-logger-%E7%B1%BB%E5%9E%8B">1. Logger 类型</a></li>
<li><a href="#2-%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95">2. 高级用法</a>
<ul>
<li><a href="#21-%E6%9F%A5%E7%9C%8B-log-%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">2.1 查看 log 详细信息</a></li>
<li><a href="#22-%E6%89%93%E5%BC%80%E7%AD%9B%E9%80%89%E5%99%A8%E7%9B%B4%E6%8E%A5%E5%9C%A8-log-%E4%B8%AD%E6%98%BE%E7%A4%BA%E8%AF%A6%E7%BB%86%E4%BF%A1%E6%81%AF">2.2 打开筛选器，直接在 log 中显示详细信息</a></li>
<li><a href="#23-%E5%BF%AB%E9%80%9F%E8%B7%B3%E8%BD%AC%E6%BA%90%E4%BB%A3%E7%A0%81">2.3 快速跳转源代码</a></li>
<li><a href="#24-%E6%97%A5%E5%BF%97%E8%BF%87%E6%BB%A4">2.4 日志过滤</a></li>
</ul>
</li>
<li><a href="#3-%E5%8D%8F%E4%BD%9C%E5%BC%80%E5%8F%91">3. 协作开发</a>
<ul>
<li><a href="#31-logger-%E5%8F%AA%E5%9C%A8debug%E7%8E%AF%E5%A2%83%E4%BD%BF%E7%94%A8">3.1 Logger 只在debug环境使用</a></li>
<li><a href="#32-%E5%A4%9A%E4%BA%BA%E5%8D%8F%E4%BD%9C">3.2 多人协作</a></li>
<li><a href="#33-%E4%B8%A4%E8%80%85%E7%BB%93%E5%90%88">3.3 两者结合</a></li>
</ul>
</li>
</ul>
</li>
</ul>

              </div>
            </div>
          </article>
        </div>

        
          <div class="next-post">
            <div class="next">下一篇</div>
            <a href="https://lijianfei.com/post/xin-jia-po-ru-he-ci-tui-nu-yong/">
              <h3 class="post-title">
                新加坡如何辞退女佣
              </h3>
            </a>
          </div>
        

        

        <div class="site-footer">
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
  <a class="rss" href="https://lijianfei.com/atom.xml" target="_blank">
    <i class="ri-rss-line"></i> RSS
  </a>
</div>

      </div>
    </div>

    <script>
      hljs.initHighlightingOnLoad()

      let mainNavLinks = document.querySelectorAll(".markdownIt-TOC a");

      // This should probably be throttled.
      // Especially because it triggers during smooth scrolling.
      // https://lodash.com/docs/4.17.10#throttle
      // You could do like...
      // window.addEventListener("scroll", () => {
      //    _.throttle(doThatStuff, 100);
      // });
      // Only not doing it here to keep this Pen dependency-free.

      window.addEventListener("scroll", event => {
        let fromTop = window.scrollY;

        mainNavLinks.forEach((link, index) => {
          let section = document.getElementById(decodeURI(link.hash).substring(1));
          let nextSection = null
          if (mainNavLinks[index + 1]) {
            nextSection = document.getElementById(decodeURI(mainNavLinks[index + 1].hash).substring(1));
          }
          if (section.offsetTop <= fromTop) {
            if (nextSection) {
              if (nextSection.offsetTop > fromTop) {
                link.classList.add("current");
              } else {
                link.classList.remove("current");    
              }
            } else {
              link.classList.add("current");
            }
          } else {
            link.classList.remove("current");
          }
        });
      });

    </script>
  </body>
</html>
